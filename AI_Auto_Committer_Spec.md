# Specification Document: AI Auto-Committer (Windows GUI)

## 1. Application Purpose

Create a productivity tool for developers working in a Windows environment that automates the Git commit process. The tool will detect code changes, generate a meaningful and professional commit message using AI, and execute the relevant Git commands in the terminal with one (or two) button clicks.

## 2. User Interface (GUI / UX)

The design should be minimalist and dark-themed (Dark Mode), resembling a terminal while still providing convenient graphical elements.

### Main Screen Components

- **Path Input Field**  
  A text box displaying the path of the selected project directory.

- **“Browse” Button**  
  Opens the Windows File Explorer to select a directory.

- **Terminal Output Window**  
  A large read-only text area with a black background and green/white font. It will display Git command output and application status messages.

- **Message Preview Area**  
  An editable text box showing the commit message generated by the AI, allowing the user to refine it before submission.

- **Primary Action Button — “Generate & Commit”**  
  A large button that triggers the full process.

## 3. User Flow and Logic

### Phase A: Initialization & Selection

1. The user launches the application.  
2. The user selects a project folder (Repository).  
3. The application checks whether the selected directory is a valid Git repository (verifies existence of the `.git` folder).

### Phase B: Change Analysis (Back-End Logic)

When the action button is pressed:

1. **Status Check**  
   The application runs `git status` to verify whether changes exist.

2. **Extract Changes**  
   The application runs:
   - `git diff` for unstaged files  
   - `git diff --cached` for staged files  
   The results are stored in memory.

   **Note:** If the diff is too large (e.g., more than 4,000 characters), truncate it or send only a file list to avoid API token limits.

3. **Send to AI**  
   The diff content is sent to an AI API (e.g., OpenAI/Claude) with a dedicated prompt (see Section 5).

### Phase C: Confirmation & Execution

1. The AI returns a generated commit message.  
2. The message is displayed in the **Message Preview** box.  
3. Automation is executed:
   - Run `git add .`
   - Run `git commit -m "GENERATED_MESSAGE"`
4. The terminal window displays feedback, e.g.:  
   `[SUCCESS] Changes committed successfully`

## 4. Technical Requirements

### Suggested Architecture

- **Language:** Python (recommended due to strong AI and process-handling libraries)  
- **GUI Framework:** Tkinter, PyQt, or CustomTkinter for a more modern appearance  
- **Git Integration:** GitPython library or `subprocess` for shell execution  
- **AI Integration:** `openai` library or `requests` for API calls

### Configuration

The application should include a configuration file (`config.json` or `.env`) containing:

- `API_KEY` — AI service key  
- `MODEL_NAME` — Model type (e.g., `gpt-4o-mini`, `gpt-3.5-turbo` for speed and cost efficiency)

## 5. AI Instruction (System Prompt)

This is critical to achieving high-quality results. The prompt sent to the API should be structured as follows:

> **Role:** You are a senior software engineer assistant.  
> **Task:** I will provide you with the output of a git diff. Your goal is to write a concise and descriptive git commit message based on these changes.  
> **Format:**
> - Start with a short summary line (under 50 chars).  
> - Leave one empty line.  
> - Provide a bulleted list of the specific changes.  
> - Use present tense (“Add feature,” not “Added feature”).  
> **Input:** [INSERT GIT DIFF HERE]

## 6. Error Handling

The application must display clear terminal messages in the following scenarios:

- **No Git Repository** — Selected directory does not contain a Git project  
- **No Changes** — `git status` returns a clean working tree  
- **API Error** — Connectivity failure, invalid key, or network issue  
- **Git Lock** — `index.lock` exists and Git is blocked
